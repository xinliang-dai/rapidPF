<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Tillmann Mühlpfordt">
        <link rel="canonical" href="https://kit-iai.github.io/rapidPF/problem-formulation/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Problem formulation - rapidPF documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
        <link href="../css/extra.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">rapidPF documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">RapidPF</a>
                            </li>
                            <li class="navitem">
                                <a href="../installation/" class="nav-link">Installation</a>
                            </li>
                            <li class="navitem">
                                <a href="../getting-started/" class="nav-link">Getting started</a>
                            </li>
                            <li class="navitem">
                                <a href="../overview/" class="nav-link">Overview</a>
                            </li>
                            <li class="navitem">
                                <a href="../example/" class="nav-link">Example</a>
                            </li>
                            <li class="navitem">
                                <a href="../assumptions/" class="nav-link">Assumptions</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Problem formulation</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Mfiles <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">01 generator</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../mfiles/01_generator/create_skeleton_mpc/" class="dropdown-item">create_skeleton_mpc</a>
</li>
            
<li>
    <a href="../mfiles/01_generator/merge_systems/" class="dropdown-item">merge_systems</a>
</li>
            
<li>
    <a href="../mfiles/01_generator/run_case_file_generator/" class="dropdown-item">run_case_file_generator</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">02 splitter</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../mfiles/02_splitter/add_consensus_information/" class="dropdown-item">add_consensus_information</a>
</li>
            
<li>
    <a href="../mfiles/02_splitter/run_case_file_splitter/" class="dropdown-item">run_case_file_splitter</a>
</li>
            
<li>
    <a href="../mfiles/02_splitter/split_case_file/" class="dropdown-item">split_case_file</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">03 parser</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../mfiles/03_parser/build_consensus_constraints/" class="dropdown-item">build_consensus_constraints</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/create_bus_specifications/" class="dropdown-item">create_bus_specifications</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/create_power_flow_equation_for_p/" class="dropdown-item">create_power_flow_equation_for_p</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/create_power_flow_equation_for_q/" class="dropdown-item">create_power_flow_equation_for_q</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/generate_distributed_problem/" class="dropdown-item">generate_distributed_problem</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/solve_distributed_problem_centralized/" class="dropdown-item">solve_distributed_problem_centralized</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/solve_distributed_problem_with_aladin/" class="dropdown-item">solve_distributed_problem_with_aladin</a>
</li>
            
<li>
    <a href="../mfiles/03_parser/validate_distributed_problem_formulation/" class="dropdown-item">validate_distributed_problem_formulation</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../sensitivities/" class="nav-link">Sensitivities</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../assumptions/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../mfiles/01_generator/create_skeleton_mpc/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/KIT-IAI/rapidPF/edit/master/docs/problem-formulation.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#problem-formulation" class="nav-link">Problem formulation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#core-nodes-copy-nodes" class="nav-link">Core nodes &amp; copy nodes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#local-power-flow-problem" class="nav-link">Local power flow problem</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#decentralized-power-flow-problem" class="nav-link">Decentralized power flow problem</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="problem-formulation">Problem formulation</h1>
<p>Here we present the mathematical formulation of the distributed power
flow problem, which simply reads</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &amp;= 0 \\
        g^{\text{bus}}_i ( x_i ) &amp;= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &amp;= 0.
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &= 0 \\
        g^{\text{bus}}_i ( x_i ) &= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &= 0.
    \end{aligned}</script>
</div>
<p>In plain words, the first set of equations satisfies the power flow
equations in each region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>, the second set of equations accounts for
the bus specifications, and the third set of equations ensures consensus
among the nodes that are shared between regions (will be explained
below).</p>
<p>Its advantage is that its solution—supposing it exists—is mathematically
equivalent to the original power flow problem. Instead of often done
splitting of lines we simply copy neighboring buses within regions.</p>
<p>With rapidPF, the distributed power flow problem can be solved in two different problem formulations:</p>
<ul>
<li>as a distributed feasibility problem,</li>
<li>or as a distributed least-squares problem.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">What problem formulation to use</p>
<p>From our experience, the distributed least-squares formulation works better.</p>
</div>
<h2 id="core-nodes-copy-nodes">Core nodes &amp; copy nodes</h2>
<p>Suppose we have a grid that looks like as follows</p>
<p><img alt="image" src="visualization/original.png" /></p>
<p>There are a total of <span class="arithmatex"><span class="MathJax_Preview">12</span><script type="math/tex">12</script></span> buses in the system. The dashed lines
indicate the three different regions: buses <span class="arithmatex"><span class="MathJax_Preview">\{ 1, 2, 3 \}</span><script type="math/tex">\{ 1, 2, 3 \}</script></span> belong to
what we call the master system, buses <span class="arithmatex"><span class="MathJax_Preview">\{4, 5, 6, 7 \}</span><script type="math/tex">\{4, 5, 6, 7 \}</script></span> belong to what
we call the (first) worker system, and buses <span class="arithmatex"><span class="MathJax_Preview">\{ 8, 9, 10, 11, 12 \}</span><script type="math/tex">\{ 8, 9, 10, 11, 12 \}</script></span>
belong to the (second) worker system. Hence, we distinguish between
<em>master</em> and <em>worker</em> systems; these local or regional systems (or just
<em>subsystems</em>) make up the overall power system.</p>
<p>For the overall system the power flow problem means to compute the
values</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    x_i = \begin{bmatrix}
        \theta_i \\
        v_i \\
        p_i \\
        q_i \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n}\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    x_i = \begin{bmatrix}
        \theta_i \\
        v_i \\
        p_i \\
        q_i \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n}\end{aligned}</script>
</div>
<p>for all <span class="arithmatex"><span class="MathJax_Preview">i \in \{1, \dots, 12 \}</span><script type="math/tex">i \in \{1, \dots, 12 \}</script></span>. A prototypical power flow problem
can be formulated mathematically as a system of nonlinear equations of
the form</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}( x) &amp;= 0, \\
        g^{\text{bus}}( x) &amp;= 0,
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}( x) &= 0, \\
        g^{\text{bus}}( x) &= 0,
    \end{aligned}</script>
</div>
<p>where <span class="arithmatex"><span class="MathJax_Preview">g^{\text{pf}}( x) = 0</span><script type="math/tex">g^{\text{pf}}( x) = 0</script></span> constitutes the <span class="arithmatex"><span class="MathJax_Preview">2 \times 12</span><script type="math/tex">2 \times 12</script></span> power
flow equations, and <span class="arithmatex"><span class="MathJax_Preview">g^{\text{bus}}( x) = 0</span><script type="math/tex">g^{\text{bus}}( x) = 0</script></span> stands for the remaining
<span class="arithmatex"><span class="MathJax_Preview">2 \times 12</span><script type="math/tex">2 \times 12</script></span> bus specifications. This yields a total of
<span class="arithmatex"><span class="MathJax_Preview">4 \times 12</span><script type="math/tex">4 \times 12</script></span> equations for <span class="arithmatex"><span class="MathJax_Preview">4 \times 12</span><script type="math/tex">4 \times 12</script></span> unknowns. Arguably, this
leads to large systems of nonlinear equations as soon as the number of
buses in the power system increases. From here on we call this
prototypical power flow problem we just described the <em>centralized</em>
power flow problem.</p>
<p>The idea of <em>distributed</em> power flow is to solve <em>local</em> power flow
problems within each system (= the master system, and all of the worker
systems), independent of each other, and iterate for as long as
necessary until the solution of the centralized problem is obtained.
Iteration here means to find consensus on the physical values of the
exchanged power between the subsystems.</p>
<p>Before making this idea mathematically precise we introduce some more
Nomenclature. Suppose we are seated in the master system, the one
composed of buses <span class="arithmatex"><span class="MathJax_Preview">\{1, 2, 3 \}</span><script type="math/tex">\{1, 2, 3 \}</script></span>. From our perspective both worker
systems are our <em>neighbors</em>. More precisely, we know only that bus <span class="arithmatex"><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span>
(located in the first worker system) is our connection to the first worker
system. Likewise, bus <span class="arithmatex"><span class="MathJax_Preview">8</span><script type="math/tex">8</script></span> (located in the second worker system) is our
connection to the second worker system. To distinguish between these
different kinds of buses we call the buses <span class="arithmatex"><span class="MathJax_Preview">\{1, 2, 3 \}</span><script type="math/tex">\{1, 2, 3 \}</script></span> the <em>core</em>
nodes of the master system, and buses <span class="arithmatex"><span class="MathJax_Preview">\{ 4, 8\}</span><script type="math/tex">\{ 4, 8\}</script></span> the <em>copy</em> nodes.
Importantly, all other nodes do not exist for us; they are ignored.
Graphically, our world looks as follows.</p>
<p><img alt="image" src="visualization/version_1.png" /></p>
<p>Why the term <em>copy</em>? Because when formulating the power flow equations
for the master system we need to know the voltages at the <em>copy</em> nodes.
And in case we don’t know the values (which we really don’t because the
copy nodes do not belong to our jurisdiction), then we have to <em>assume</em>
values for them. This can be thought of as copying the buses into the
shaded are denoted as “<span class="arithmatex"><span class="MathJax_Preview">\text{copy + core nodes}</span><script type="math/tex">\text{copy + core nodes}</script></span>,” hence the name.</p>
<p>Taking on the perspective of the first worker system we see: our core
nodes are <span class="arithmatex"><span class="MathJax_Preview">\{ 4, 5, 6, 7 \}</span><script type="math/tex">\{ 4, 5, 6, 7 \}</script></span>, and there is just one copy bus <span class="arithmatex"><span class="MathJax_Preview">1</span><script type="math/tex">1</script></span>,
the first bus in the master system. Our world looks as follows.</p>
<p><img alt="image" src="visualization/version_2.png" /></p>
<p>Being able to distinguish between core nodes and copy nodes allows to
formulate the distributed power flow clearer: <em>solve the power flow
problem in each subsystem and attain consensus between the copy nodes
and their core node equivalents.</em> By core node equivalent we mean the
following: the first copy bus of the master system has bus <span class="arithmatex"><span class="MathJax_Preview">4</span><script type="math/tex">4</script></span> as its
core node equivalent. It is clear from intuition that if the voltage at
the copy node in each subsystem corresponds to the value of its core
node equivalent, then the solution of the distributed power flow problem
is the same as the solution from the centralized power flow problem.</p>
<p>Let us make these ideas mathematically more precise.</p>
<h2 id="local-power-flow-problem">Local power flow problem</h2>
<p>The following table collects symbols and their meanings as they are used
throughout.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Symbol</th>
<th style="text-align: left;">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">n^{\text{reg}}</span><script type="math/tex">n^{\text{reg}}</script></span></td>
<td style="text-align: left;">Number of regions</td>
</tr>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">n^{\text{conn}}</span><script type="math/tex">n^{\text{conn}}</script></span></td>
<td style="text-align: left;">Number of connecting lines between regions</td>
</tr>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">n^\text{core}_{i}</span><script type="math/tex">n^\text{core}_{i}</script></span></td>
<td style="text-align: left;">Number of core nodes in region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">n^\text{copy}_{i}</span><script type="math/tex">n^\text{copy}_{i}</script></span></td>
<td style="text-align: left;">Number of copy nodes in region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">x_{i}</span><script type="math/tex">x_{i}</script></span></td>
<td style="text-align: left;">State of core nodes in region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
<tr>
<td style="text-align: left;"><span class="arithmatex"><span class="MathJax_Preview">z_{i}</span><script type="math/tex">z_{i}</script></span></td>
<td style="text-align: left;">State of copy nodes in region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span></td>
</tr>
</tbody>
</table>
<p>We compose the set of buses of each region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> into a set of <em>core
nodes</em>, and a set of <em>copy nodes</em>. The core nodes are the original nodes
that make up the power system. The copy nodes are the nodes that connect
the power system to the neighboring power systems. Hence, the copy nodes
<em>do not belong to the power system</em> but to its neighbors. The sole
purpose of the copy nodes is to store the complex voltage information at
the neighboring buses such that power flow equations can be constructed.</p>
<p>The state of the core nodes contains the voltage angles, the voltage
magnitudes, the net active power, and the net reactive power of all core
nodes</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    \label{eq:state-core}
    x_i = \begin{bmatrix}
        \theta_i^\text{core} \\
        v_i^\text{core} \\
        p_i^\text{core} \\
        q_i^\text{core} \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n^\text{core}_i}.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \label{eq:state-core}
    x_i = \begin{bmatrix}
        \theta_i^\text{core} \\
        v_i^\text{core} \\
        p_i^\text{core} \\
        q_i^\text{core} \\
    \end{bmatrix}
    \in \mathbb{R}^{4 n^\text{core}_i}.\end{aligned}</script>
</div>
<p>The state of the copy nodes contains the voltage angles and the voltage
magnitudes of all copy nodes</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    \label{eq:state-copy}
    z_i = \begin{bmatrix}
        \theta_i^\text{copy} \\
        v_i^\text{copy}
    \end{bmatrix}
    \in \mathbb{R}^{2 n^\text{copy}_i}.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \label{eq:state-copy}
    z_i = \begin{bmatrix}
        \theta_i^\text{copy} \\
        v_i^\text{copy}
    \end{bmatrix}
    \in \mathbb{R}^{2 n^\text{copy}_i}.\end{aligned}</script>
</div>
<p>We see: each region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> is described by a total of
<span class="arithmatex"><span class="MathJax_Preview">4 n^\text{core}_i + 2 n^\text{copy}_i</span><script type="math/tex">4 n^\text{core}_i + 2 n^\text{copy}_i</script></span> real numbers.</p>
<h3 id="power-flow-equations">Power flow equations</h3>
<p>In region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> we formulate a total of <span class="arithmatex"><span class="MathJax_Preview">2 n^\text{core}_i</span><script type="math/tex">2 n^\text{core}_i</script></span> power flow
equations
<span class="arithmatex"><span class="MathJax_Preview">g^{\text{pf}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \times \mathbb{R}^{2 n^\text{copy}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</span><script type="math/tex">g^{\text{pf}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \times \mathbb{R}^{2 n^\text{copy}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</script></span>
for all core nodes</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    g^{\text{pf}}_i( x_i, z_i) = 0.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    g^{\text{pf}}_i( x_i, z_i) = 0.\end{aligned}</script>
</div>
<h3 id="bus-specifications">Bus specifications</h3>
<p>In region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span> we formulate a total of <span class="arithmatex"><span class="MathJax_Preview">2 n^\text{core}_i</span><script type="math/tex">2 n^\text{core}_i</script></span> bus
specifications
<span class="arithmatex"><span class="MathJax_Preview">g^{\text{bus}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</span><script type="math/tex">g^{\text{bus}}_i \colon \mathbb{R}^{4 n^\text{core}_i} \rightarrow \mathbb{R}^{2 n^\text{core}_i}</script></span>
for all core nodes</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    g^{\text{bus}}_i( x_i) = 0.\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    g^{\text{bus}}_i( x_i) = 0.\end{aligned}</script>
</div>
<h3 id="degrees-of-freedom">Degrees of freedom</h3>
<p>Subtracting the number of equations from the number of decision
variables gives us a total of</p>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
    \underbrace{4 n^\text{core}_i + 2 n^\text{copy}_i}_{\text{Decision variables}} - \underbrace{2 n^\text{core}_i}_{\text{Power flow equations}} - \underbrace{2 n^\text{core}_i}_{\text{Bus specifications}} = \underbrace{2 n^\text{copy}_i}_{\text{Degrees of freedom}}\end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
    \underbrace{4 n^\text{core}_i + 2 n^\text{copy}_i}_{\text{Decision variables}} - \underbrace{2 n^\text{core}_i}_{\text{Power flow equations}} - \underbrace{2 n^\text{core}_i}_{\text{Bus specifications}} = \underbrace{2 n^\text{copy}_i}_{\text{Degrees of freedom}}\end{aligned}</script>
</div>
<p>degrees of freedom for each region <span class="arithmatex"><span class="MathJax_Preview">i</span><script type="math/tex">i</script></span>. These degrees of freedom must
be fixed globally by the consensus constraints.</p>
<h2 id="decentralized-power-flow-problem">Decentralized power flow problem</h2>
<div class="arithmatex">
<div class="MathJax_Preview">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &amp;= 0 \\
        g^{\text{bus}}_i ( x_i ) &amp;= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &amp;= 0,
    \end{aligned}</div>
<script type="math/tex; mode=display">\begin{aligned}
        g^{\text{pf}}_i( x_i, z_i ) &= 0 \\
        g^{\text{bus}}_i ( x_i ) &= 0 \\
        \sum_{i = 1}^{n^{\text{reg}}} A_i \begin{bmatrix}
            x_i \\
            z_i
        \end{bmatrix}
        &= 0,
    \end{aligned}</script>
</div>
<p>where the consensus matrices
<span class="arithmatex"><span class="MathJax_Preview">A_i \in \mathbb{R}^{4 n^{\text{conn}}\times (4 n^\text{core}_i + 2 n^\text{copy}_i)}</span><script type="math/tex">A_i \in \mathbb{R}^{4 n^{\text{conn}}\times (4 n^\text{core}_i + 2 n^\text{copy}_i)}</script></span>
enforce equality of the voltage angle and the voltage magnitude at the
copy buses and their respective original buses.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/jquery-3.6.0.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
